# è®­ç»ƒæŒ‡å—

## å½“å‰è®­ç»ƒçŠ¶æ€

âœ… **è®­ç»ƒå·²å¯åŠ¨ï¼**

- ç¯å¢ƒ: BipedalWalker-v3
- è®­ç»ƒä»£æ•°: 500ä»£
- ç§ç¾¤å¤§å°: 50
- ä¿å­˜é¢‘ç‡: æ¯100ä»£
- è§†é¢‘é¢‘ç‡: æ¯100ä»£
- é¢„è®¡æ—¶é—´: çº¦40-60åˆ†é’Ÿ

## ç›‘æ§è®­ç»ƒè¿›åº¦

### æ–¹æ³•1: ä½¿ç”¨ç›‘æ§è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./monitor_training.sh
```

æ˜¾ç¤ºï¼š
- æœ€æ–°çš„è®­ç»ƒè¿›åº¦
- å·²å®Œæˆä»£æ•°
- å‘ç°çš„æ–°çºªå½•æ•°
- ä¿å­˜çš„æ£€æŸ¥ç‚¹æ•°é‡
- ç”Ÿæˆçš„è§†é¢‘æ•°é‡

### æ–¹æ³•2: å®æ—¶æŸ¥çœ‹æ—¥å¿—

```bash
tail -f training_output.log
```

æŒ‰ `Ctrl+C` é€€å‡ºæŸ¥çœ‹

### æ–¹æ³•3: æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€

```bash
ps aux | grep train_with_video.py | grep -v grep
```

å¦‚æœçœ‹åˆ°è¿›ç¨‹åœ¨è¿è¡Œï¼Œè¯´æ˜è®­ç»ƒæ­£å¸¸ã€‚

## è®­ç»ƒè¾“å‡º

### æ¯ä¸€ä»£çš„æ—¥å¿—æ ¼å¼ï¼š

```
[Gen 1/500] Eval: 10/50... Eval: 20/50... Eval: 30/50... Eval: 40/50... Eval: 50/50... Best: -95.23, Mean: -105.67, Std: 12.34 | Time: 15.2s
```

è¯´æ˜ï¼š
- `Gen X/500`: å½“å‰ä»£æ•°
- `Eval X/50`: è¯„ä¼°è¿›åº¦ï¼ˆ50ä¸ªä¸ªä½“ï¼‰
- `NEW RECORD!`: å‘ç°æ›´å¥½çš„ä¸ªä½“
- `Best`: æœ¬ä»£æœ€ä½³é€‚åº”åº¦
- `Mean`: æœ¬ä»£å¹³å‡é€‚åº”åº¦
- `Std`: æ ‡å‡†å·®
- `Recording video`: æ­£åœ¨å½•åˆ¶è§†é¢‘
- `Saving checkpoint`: æ­£åœ¨ä¿å­˜æ£€æŸ¥ç‚¹
- `Time`: æœ¬ä»£è€—æ—¶

### æ¯100ä»£ä¼šå‘ç”Ÿï¼š

1. **å½•åˆ¶è§†é¢‘**: `videos/best_model_genXXX/`
2. **ä¿å­˜æ¨¡å‹**: `best_model_genXXX.npy`
3. **ä¿å­˜ç»Ÿè®¡**: `training_stats.npy`

## é¢„æœŸè®­ç»ƒæ•ˆæœ

### BipedalWalker-v3 é€‚åº”åº¦è¿›å±•ï¼š

| ä»£æ•° | é¢„æœŸé€‚åº”åº¦ | è¡¨ç° |
|------|-----------|------|
| 0-50 | -100 åˆ° -50 | æœºå™¨äººå­¦ä¼šç«™ç«‹ï¼Œä¸å†ç«‹å³å€’ä¸‹ |
| 50-100 | -50 åˆ° 0 | å¼€å§‹å°è¯•ç§»åŠ¨ï¼Œèƒ½ä¿æŒå¹³è¡¡ç‰‡åˆ» |
| 100-200 | 0 åˆ° 50 | äº§ç”Ÿç±»ä¼¼è¡Œèµ°çš„åŠ¨ä½œ |
| 200-300 | 50 åˆ° 150 | ç¨³å®šå‘å‰ç§»åŠ¨ |
| 300-500 | 150+ | æµç•…è¡Œèµ°ï¼Œå¯èƒ½å®Œæˆåœ°å½¢ |

**æ³¨æ„**: é€‚åº”åº¦ 300+ å°±ç®—æ˜¯éå¸¸å¥½çš„ç»“æœäº†ï¼

## ä¸­é€”æ£€æŸ¥ç»“æœ

### æŸ¥çœ‹å·²ä¿å­˜çš„æ¨¡å‹

```bash
ls -lh best_model_gen*.npy
```

### æŸ¥çœ‹è§†é¢‘

```bash
ls -lh videos/*/
open videos/best_model_gen100/  # æ‰“å¼€è§†é¢‘æ–‡ä»¶å¤¹
```

### ç”Ÿæˆå½“å‰è®­ç»ƒæ›²çº¿

```bash
conda run -n ga-humanoid python visualize.py --plot-only
```

## å¦‚æœéœ€è¦åœæ­¢è®­ç»ƒ

### ä¼˜é›…åœæ­¢ï¼ˆæ¨èï¼‰

è®©å½“å‰ä»£å®Œæˆååœæ­¢ï¼š
```bash
# å‘é€ä¸­æ–­ä¿¡å·
pkill -INT -f train_with_video.py
```

### å¼ºåˆ¶åœæ­¢

ç«‹å³ç»ˆæ­¢ï¼š
```bash
pkill -9 -f train_with_video.py
```

**æ³¨æ„**: åœæ­¢åï¼Œå·²ä¿å­˜çš„æ£€æŸ¥ç‚¹ä¸ä¼šä¸¢å¤±ã€‚

## è®­ç»ƒå®Œæˆå

### 1. æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„æ¨¡å‹

```bash
ls -1 best_model*.npy
```

åº”è¯¥çœ‹åˆ°ï¼š
- `best_model.npy` (æœ€ç»ˆæœ€ä½³æ¨¡å‹)
- `best_model_gen100.npy`
- `best_model_gen200.npy`
- `best_model_gen300.npy`
- `best_model_gen400.npy`
- `best_model_gen500.npy`

### 2. æŸ¥çœ‹è®­ç»ƒæ›²çº¿

```bash
conda run -n ga-humanoid python visualize.py --plot-only
```

ç”Ÿæˆ `training_progress.png`

### 3. è¿è¡Œæœ€ä½³æ¨¡å‹

```bash
conda run -n ga-humanoid python visualize.py --episodes 5
```

### 4. å¯¹æ¯”ä¸åŒä»£æ•°çš„æ¨¡å‹

æŸ¥çœ‹videosç›®å½•ä¸­çš„è§†é¢‘ï¼š
```bash
ls -lh videos/*/
```

æ¯ä¸ªè§†é¢‘å±•ç¤ºäº†ä¸åŒè®­ç»ƒé˜¶æ®µçš„æ•ˆæœã€‚

### 5. ä¸ºæ‰€æœ‰æ£€æŸ¥ç‚¹ç”Ÿæˆè§†é¢‘

å¦‚æœæƒ³ä¸ºæ‰€æœ‰ä¿å­˜çš„æ¨¡å‹ç”Ÿæˆè§†é¢‘ï¼š
```bash
conda run -n ga-humanoid python generate_videos.py
```

## ç»§ç»­è®­ç»ƒ

å¦‚æœæƒ³ä»æŸä¸ªæ£€æŸ¥ç‚¹ç»§ç»­è®­ç»ƒï¼Œå¯ä»¥ä¿®æ”¹ `train_with_video.py`ï¼š

```python
# åœ¨åˆ›å»ºGAåæ·»åŠ ï¼š
import numpy as np
checkpoint = np.load('best_model_gen300.npy', allow_pickle=True).item()
network.set_params(checkpoint['params'])
ga.population[0] = checkpoint['params']
```

## è°ƒæ•´è®­ç»ƒå‚æ•°

ç¼–è¾‘ `config.py`:

```python
# å¢åŠ ç§ç¾¤å¤§å°ï¼ˆæ›´å¥½çš„æ¢ç´¢ï¼Œä½†æ›´æ…¢ï¼‰
POPULATION_SIZE = 100

# å¢åŠ è®­ç»ƒä»£æ•°
GENERATIONS = 1000

# è°ƒæ•´å˜å¼‚ç‡ï¼ˆå¢åŠ æ¢ç´¢æ€§ï¼‰
MUTATION_RATE = 0.2

# ä½¿ç”¨æ›´å¤§çš„ç½‘ç»œï¼ˆæ›´å¼ºçš„è¡¨è¾¾èƒ½åŠ›ï¼‰
HIDDEN_LAYERS = [128, 64]
```

## æ•…éšœæ’é™¤

### è®­ç»ƒä¼¼ä¹å¡ä½äº†

æ£€æŸ¥è¿›ç¨‹CPUä½¿ç”¨ç‡ï¼š
```bash
top -p $(pgrep -f train_with_video.py)
```

å¦‚æœCPUä½¿ç”¨ç‡å¾ˆä½ï¼Œå¯èƒ½é‡åˆ°é—®é¢˜ã€‚æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
tail -100 training_output.log
```

### é€‚åº”åº¦ä¸€ç›´ä¸æé«˜

è¿™æ˜¯æ­£å¸¸çš„ï¼é—ä¼ ç®—æ³•å¯èƒ½ä¼šç»å†"åœæ»æœŸ"ã€‚å»ºè®®ï¼š
1. ç»§ç»­è®­ç»ƒï¼ˆå¯èƒ½éœ€è¦æ›´å¤šä»£æ•°ï¼‰
2. å¢åŠ ç§ç¾¤å¤§å°
3. å¢åŠ å˜å¼‚ç‡
4. é‡å¯è®­ç»ƒï¼ˆéšæœºåˆå§‹åŒ–ä¸åŒï¼‰

### å†…å­˜ä¸è¶³

å‡å°ç§ç¾¤å¤§å°æˆ–å‡å°‘MAX_STEPSï¼š
```python
POPULATION_SIZE = 30
MAX_STEPS = 500
```

## æ€§èƒ½åŸºå‡†

åœ¨ MacBook Pro M1/M2 ä¸Šï¼š
- å•ä»£æ—¶é—´: 10-20ç§’ï¼ˆç§ç¾¤50ï¼‰
- 100ä»£: 15-30åˆ†é’Ÿ
- 500ä»£: 60-120åˆ†é’Ÿ

## æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `training_output.log` | è®­ç»ƒæ—¥å¿— |
| `best_model.npy` | æœ€ç»ˆæœ€ä½³æ¨¡å‹ |
| `best_model_genXXX.npy` | ç¬¬XXXä»£çš„æ£€æŸ¥ç‚¹ |
| `training_stats.npy` | è®­ç»ƒç»Ÿè®¡æ•°æ® |
| `training_progress.png` | è®­ç»ƒæ›²çº¿å›¾ |
| `videos/` | æ¼”ç¤ºè§†é¢‘ç›®å½• |
| `monitor_training.sh` | ç›‘æ§è„šæœ¬ |

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ç›‘æ§è¿›åº¦
./monitor_training.sh

# å®æ—¶æ—¥å¿—
tail -f training_output.log

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep train_with_video.py

# åœæ­¢è®­ç»ƒ
pkill -INT -f train_with_video.py

# æŸ¥çœ‹ç»“æœ
conda run -n ga-humanoid python visualize.py

# ç”Ÿæˆå›¾è¡¨
conda run -n ga-humanoid python visualize.py --plot-only

# æŸ¥çœ‹æ¨¡å‹
ls -lh best_model*.npy

# æŸ¥çœ‹è§†é¢‘
ls -lh videos/*/
```

## æœ€åæç¤º

- âœ… è®­ç»ƒå¯èƒ½éœ€è¦1-2å°æ—¶ï¼Œè¯·è€å¿ƒç­‰å¾…
- âœ… å¯ä»¥éšæ—¶æŸ¥çœ‹ä¸­é—´ç»“æœï¼ˆæ¨¡å‹ã€è§†é¢‘ã€æ—¥å¿—ï¼‰
- âœ… å³ä½¿ä¸­é€”åœæ­¢ï¼Œå·²ä¿å­˜çš„æ£€æŸ¥ç‚¹ä¹Ÿä¸ä¼šä¸¢å¤±
- âœ… BipedalWalkerè¾¾åˆ°100+çš„é€‚åº”åº¦å°±å·²ç»å¾ˆä¸é”™äº†
- âœ… å¯ä»¥å¯¹æ¯”ä¸åŒä»£æ•°çš„è§†é¢‘ï¼Œçœ‹åˆ°æ˜æ˜¾çš„å­¦ä¹ è¿›æ­¥

ç¥è®­ç»ƒé¡ºåˆ©ï¼ğŸš€

