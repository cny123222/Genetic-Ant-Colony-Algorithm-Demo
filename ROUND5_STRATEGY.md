# Round 5 训练策略

## 核心改进：多次评估 + 视频质量保证

### Round 4 问题分析
1. **适应度评估不准确**：每个个体只在环境中运行1次，但BipedalWalker的地形是随机的
2. **视频保存有BUG**：同一个模型（best 153.29）在Gen 300 表现好(98.5)，Gen 400却很差(-105.8)
3. **训练不稳定**：随机性导致选择压力不准确，优秀基因可能被误判淘汰

### Round 5 策略

#### 1. 多次评估取平均 (EVAL_EPISODES=3)
- **问题**：单次评估受环境随机性影响大
- **解决**：每个个体在3个不同随机种子下运行，取平均fitness
- **好处**：
  - 更准确的适应度评估
  - 选择更可靠的优秀基因
  - 训练更稳定
- **代价**：每代时间增加3倍

#### 2. 视频质量保证 (VIDEO_TRIALS=5)
- **问题**：录视频时随机环境可能很难，导致模型表现差
- **解决**：尝试5个不同种子，保存表现最好的一次
- **好处**：视频真实反映模型最佳能力

#### 3. 参数调整（补偿时间成本）
```
种群大小: 180 → 120 (减小33%)
训练代数: 400 → 300 (减小25%)
评估次数: 1 → 3 (增加200%)
```

**预期总时间**: 与Round 4相近（种群减小补偿评估增加）

#### 4. 网络结构保持
- 网络: [256, 128, 64] (36K+ 参数)
- 已证明容量足够，继续使用

### 预期效果

#### Round 4 vs Round 5
| 指标 | Round 4 | Round 5 预期 |
|------|---------|--------------|
| 最佳Fitness | 153.29 | > 200 |
| 训练稳定性 | 中等 | 高 |
| 评估准确性 | 低 | 高 |
| 视频质量 | 不稳定 | 可靠 |

### 关键创新点

1. **Quality over Quantity**: 
   - 不是无脑增大种群/代数
   - 而是提高每次评估的质量

2. **Statistical Reliability**:
   - 用统计学方法（多次取平均）降低噪声
   - 更科学的进化过程

3. **Time-Cost Balance**:
   - 减小种群但增加评估次数
   - 总时间不变，质量提升

### 成功标准
- 最佳Fitness > 200 (BipedalWalker 通关标准)
- 视频中机器人能稳定行走至终点
- 训练曲线平滑上升（说明评估准确）

